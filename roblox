-- ตัวอย่าง Hook RemoteEvent / RemoteFunction เพื่อดูและแก้ค่า HP/MP
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- ฟังก์ชัน Hook FireServer ของ RemoteEvent
local function hookRemoteEvent(remote)
    if not remote:IsA("RemoteEvent") then return end

    local oldFireServer = remote.FireServer
    remote.FireServer = function(self, ...)
        local args = {...}

        print("[RemoteEvent Hook] Name:", remote.Name)
        print("[Arguments Before] ", unpack(args))

        -- ตัวอย่างแก้ค่า HP/MP หากเจอใน Arguments
        for i, v in ipairs(args) do
            if type(v) == "number" then
                -- สมมติเรารู้ว่า index นี้คือ HP/MP
                args[i] = math.huge -- ตั้งค่าเป็นจำนวนสูงสุด
            end
        end

        print("[Arguments After] ", unpack(args))
        return oldFireServer(self, unpack(args))
    end
end

-- ฟังก์ชัน Hook InvokeServer ของ RemoteFunction
local function hookRemoteFunction(remote)
    if not remote:IsA("RemoteFunction") then return end

    local oldInvoke = remote.InvokeServer
    remote.InvokeServer = function(self, ...)
        local args = {...}
        print("[RemoteFunction Hook] Name:", remote.Name)
        print("[Arguments Before] ", unpack(args))

        -- แก้ค่า HP/MP เช่นเดียวกับ RemoteEvent
        for i, v in ipairs(args) do
            if type(v) == "number" then
                args[i] = math.huge
            end
        end

        print("[Arguments After] ", unpack(args))
        return oldInvoke(self, unpack(args))
    end
end

-- สแกน Remote ทั้งหมดใน ReplicatedStorage
local ReplicatedStorage = game:GetService("ReplicatedStorage")
for _, obj in ipairs(ReplicatedStorage:GetDescendants()) do
    hookRemoteEvent(obj)
    hookRemoteFunction(obj)
end

-- สำหรับ Remote ที่สร้างใหม่ภายหลัง สามารถใช้ DescendantAdded
ReplicatedStorage.DescendantAdded:Connect(function(obj)
    hookRemoteEvent(obj)
    hookRemoteFunction(obj)
end)
